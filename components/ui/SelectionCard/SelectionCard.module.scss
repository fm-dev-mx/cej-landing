/* components/ui/SelectionCard/SelectionCard.module.scss */
@use "../../../styles/primitives" as p;

.card {
  /* Prevent text selection on tap */
  touch-action: manipulation;
  cursor: pointer;
  user-select: none;

  position: relative;

  display: flex;
  gap: 0.5rem;
  align-items: flex-start;

  padding: 0.75rem;
  border: 1px solid rgb(255 255 255 / 15%);
  border-radius: var(--radius);

  /* Ensure text contrast */
  color: var(--c-text-on-dark);

  background-color: rgb(255 255 255 / 3%);

  /* Optimizes tap behavior */

  /* Smooth transition for all transform/colors */
  transition:
    transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
    background-color 0.2s ease,
    border-color 0.2s ease,
    box-shadow 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    border-color: var(--c-interactive-base);
    background-color: rgb(254 201 20 / 10%);
    box-shadow: 0 8px 22px rgb(0 0 0 / 20%);

    /* Slight lift */
  }

  &:has(.input:focus-visible) {
    border-color: var(--c-interactive-base);
    box-shadow:
      0 0 0 1px var(--c-interactive-base),
      0 0 0 4px var(--c-interactive-ring);
  }

  /* Active/Click Effect: The "Spring" */
  &:active {
    transform: translateY(0) scale(0.98);
    background-color: rgb(254 201 20 / 14%);
  }

  .customIndicatorWrapper {
    transform: scale(0.9);

    font-size: 1.5rem;
    line-height: 1;

    /* FIX 1: Remove grayscale. Use opacity and scale only */
    opacity: 0.5;
    filter: none;

    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* Ensure no color filters */
  }

  /* --- Selected State --- */
  &.selected {
    z-index: 1;

    /* Reinforcement shadow */

    transform: none;

    /* Slightly more elevated */
    border: 2px solid var(--c-interactive-base);

    /* FIX 2: More visible background and thicker border */
    background-color: rgb(254 201 20 / 14%);

    /* Thickness increased to 2px */
    box-shadow:
      0 0 0 1px rgb(254 201 20 / 35%),
      var(--shadow-xl),
      var(--shadow-glass-top);

    /* Bring to front */

    .radioIndicator {
      border-color: var(--c-interactive-base);
      background-color: rgb(254 201 20 / 75%);
      box-shadow: 0 0 10px rgb(254 201 20 / 40%);

      &::after {
        transform: scale(1);
      }
    }

    .label {
      color: var(--c-text-on-dark);
    }

    .customIndicatorWrapper {
      transform: scale(1.2) rotate(-10deg);
      opacity: 1;

      /* Slightly larger to stand out */

      /* Remove text-shadow if it muddies the emoji, or keep subtle */
      filter: drop-shadow(0 2px 4px rgb(0 0 0 / 30%));
    }
  }

  /* --- Disabled State --- */
  &.disabled {
    pointer-events: none; // Prevent clicks
    cursor: not-allowed;
    opacity: 0.5 !important;
    filter: grayscale(1);

    &:hover {
      transform: none;
      border-color: rgb(255 255 255 / 15%);
      background-color: rgb(255 255 255 / 3%);
    }
  }
}

/* Custom Radio UI */
.inputWrapper {
  display: flex;

  /* Match line-height of title */
  flex-shrink: 0;
  align-items: center;
  height: 1.5rem;
}

.input {
  /* Visually hide but keep accessible */
  position: absolute;

  overflow: hidden;

  width: 1px;
  height: 1px;
  margin: -1px;
  padding: 0;
  border: 0;

  white-space: nowrap;

  clip-path: inset(50%);

  &:focus-visible+.radioIndicator {
    outline: 2px solid var(--c-interactive-base);
    outline-offset: 2px;
  }
}

.radioIndicator {
  position: relative;

  display: grid;
  place-items: center;

  width: 1.25rem;

  /* Slightly larger hit target visually */
  height: 1.25rem;
  border: 2px solid rgb(255 255 255 / 40%);
  border-radius: 50%;

  background-color: transparent;

  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Inner dot */
  &::after {
    content: "";

    transform: scale(0);

    width: 0.5rem;
    height: 0.5rem;
    border-radius: 50%;

    background-color: var(--c-primary-dark);

    transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);

    /* Bouncy scale */
  }
}

/* Content */
.content {
  display: flex;
  flex: 1;
  flex-direction: column;
  gap: 0.25rem;
}

.header {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.icon {
  font-size: 1.25rem;
  line-height: 1;
  filter: drop-shadow(0 2px 4px rgb(0 0 0 / 20%));
}

.label {
  font-size: var(--fs-base);
  font-weight: 600;
  color: white;
  transition: color 0.2s ease;
}

.description {
  margin: 0;

  font-size: var(--fs-xs);
  line-height: 1.4;

  /* Small but legible */
  color: var(--c-muted-on-dark);

  opacity: 0.9;
}
