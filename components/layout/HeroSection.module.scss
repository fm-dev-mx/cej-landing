// components/layout/HeroSection.module.scss

@use "../../styles/primitives" as p;
@use "../../styles/mixins" as *;

.hero {
  position: relative;
  display: flex;
  align-items: center;
  overflow: hidden;
  background-color: var(--c-primary-dark);
  color: var(--c-text-on-dark);

  /* Mobile: Use svh (Small Viewport Height) to avoid jumpiness with browser bars.
    We use min-height to allow content to grow if text is zoomed or content is long.
  */
  min-height: 100svh;
}

/* Background Layers */
.hero__background {
  position: absolute;
  inset: 0;
  z-index: 0;
}

.hero__video,
.hero__imagePlaceholder {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
}

.hero__imagePlaceholder {
  background-color: var(--c-primary-strong);
}

/* Overlay:
  Mobile: Vertical gradient (darker at bottom/middle) to ensure text readability
  regardless of video content.
*/
.hero__overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    rgba(2, 26, 54, 0.6) 0%,
    rgba(2, 26, 54, 0.85) 40%,
    rgba(2, 26, 54, 0.95) 100%
  );
  z-index: 1;
  width: 101%;

  /* Desktop: Horizontal gradient (left dark, right transparent) */
  @media (min-width: 1024px) {
    background: linear-gradient(
      90deg,
      rgba(2, 26, 54, 0.95) 0%,
      rgba(2, 26, 54, 0.85) 50%,
      rgba(2, 26, 54, 0.3) 100%
    );
  }
}

/* Container and Layout */
.hero__container {
  @include container;
  position: relative;
  z-index: 2;
  width: 80%;

  /* Mobile Padding:
    Top: Clear fixed header (~80px) + extra spacing.
    Bottom: Clear sticky CTA bar (~80px) + spacing to avoid cramped look.
  */
  padding-top: calc(6rem + env(safe-area-inset-top));
  padding-bottom: calc(6rem + env(safe-area-inset-bottom));

  @media (min-width: 768px) {
    padding-top: 8rem;
    padding-bottom: 4rem;
    width: 60%;
  }

  @media (min-width: 1024px) {
    padding-block: var(--sp-10);
    display: flex;
    align-items: center;
    min-height: 100%;
  }
}

.hero__content {
  width: 100%;
  max-width: 38rem; /* Optimal reading width on mobile/tablet */
  display: flex;
  flex-direction: column;
  gap: var(--sp-6);

  /* Center on mobile for balance, Left on Desktop */
  align-items: flex-start;

  @media (min-width: 768px) {
    gap: var(--sp-10);
  }

  @media (min-width: 1024px) {
    max-width: 42rem;
  }
}

/* Typography and Elements */
.hero__badge {
  display: inline-flex;
  align-items: center;
  gap: var(--sp-2);
  background-color: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 0.35rem 0.75rem;
  border-radius: 999px;
  font-size: var(--fs-xxs);
  font-weight: 600;
  color: var(--c-accent);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);

  @media (min-width: 640px) {
    margin-top: 3rem;
    font-size: var(--fs-sm);
  }
}

.hero__title {
  /* Uses the clamped variable from tokens for fluid scaling */
  font-size: var(--fs-hero);
  line-height: 1.1; /* Tight heading */
  font-weight: 800;
  letter-spacing: -0.02em;
  margin: 0;
  color: white;

  /* Prevent widows */
  word-break: break-all;
}

.hero__highlight {
  color: var(--c-accent);
  display: inline-block; /* Prevents highlight break weirdness */
  position: relative;

  /* Underline decoration */
  &::after {
    content: "";
    position: absolute;
    bottom: 0.05em;
    left: 0;
    width: 100%;
    height: 0.15em;
    background-color: var(--c-accent);
    opacity: 0.2;
    z-index: -1;
    border-radius: 2px;
  }
}

.hero__lead {
  @include p.lead;
  color: var(--c-muted-on-dark);
  font-size: var(--fs-sm);
  line-height: 1.6;
  max-width: 100%;
  margin: 0;

  strong {
    color: white;
    font-weight: 600;
  }

  @media (min-width: 640px) {
    font-size: var(--fs-base);
    max-width: 40ch; /* Limit line length for readability */
  }
}

/* Features List */
.hero__features {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: var(--sp-2);
  width: 100%;
}

.hero__feature {
  display: flex;
  align-items: flex-start; /* Align top in case text wraps */
  gap: var(--sp-2);
  font-size: var(--fs-sm);
  color: var(--c-text-on-dark);
  line-height: 1.4;

  svg {
    flex-shrink: 0; /* Icon never shrinks */
    margin-top: 0.15em; /* Visual adjustment */
  }

  strong {
    color: var(--c-accent);
    font-weight: 700;
  }
}

/* Buttons (CTAs) */
.hero__actions {
  display: flex;
  flex-direction: column;
  width: 80%;
  gap: var(--sp-3);
  margin-top: var(--sp-2);

  @media (min-width: 480px) {
    flex-direction: row;
    align-items: center;
    width: 100%;
  }

  @media (min-width: 768px) {
    width: 100%;
  }
}

.hero__btnPrimary {
  @include p.btn;
  background-color: var(--c-accent);
  color: var(--c-primary-dark);
  border: 1px solid var(--c-accent);
  font-weight: 700;
  font-size: 1rem;
  padding: 0.7rem 1.5rem;
  width: 100%;
  justify-content: center;
  box-shadow: 0 4px 14px rgba(254, 201, 20, 0.3);
  text-decoration: none;

  &:hover {
    background-color: var(--c-accent-hover);
    border-color: var(--c-accent-hover);
    transform: translateY(-2px);
  }

  @media (min-width: 480px) {
    width: auto;
  }
}

.hero__btnSecondary {
  @include p.btn;
  background-color: rgba(255, 255, 255, 0.05);
  color: white;
  border: 1px solid rgba(255, 255, 255, 0.3);
  font-weight: 600;
  font-size: 1rem;
  padding: 0.7rem 1.5rem;
  width: 100%;
  justify-content: center;
  text-decoration: none;
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);

  /* On very small mobiles, secondary button might push content too far down.
     However, "Talk to expert" is high value. We keep it but ensure sticky bar handles the rest.
     If sticky bar is active (mobile), this might be redundant but reinforces the CTA.
  */
  display: flex;

  &:hover {
    background-color: rgba(255, 255, 255, 0.15);
    border-color: white;
  }

  @media (min-width: 480px) {
    width: auto;
    background-color: transparent;
  }
}

.hero__iconWa {
  font-size: 1.2em;
  margin-right: 0.5rem;
}
